<cds-modal [open]="this.playMacro" (overlaySelected)="this.playMacro = true" (close)="this.playMacro = false">
  <form #playMacroForm="ngForm">
    <cds-modal-header style="background-color: grey;" (closeSelect)="this.playMacro = false" [showCloseButton]="false">
      <p class="cds--modal-header__heading cds--type-beta">Play Macro</p>
    </cds-modal-header>
    <div class="cds--modal-content">
      <cds-text-label>
        Select Macro:</cds-text-label>
      <cds-dropdown [size]="size" (selected)="selected($event)">
        <cds-dropdown-list [items]="macroList" required></cds-dropdown-list>
      </cds-dropdown>
     </div>
    <cds-modal-footer>
      <ng-container>
        <button cdsButton="secondary" class="customButton" (click)="this.playMacro = false">
          Cancel
        </button>
        <button cdsButton="primary" class="customButton" (click)="this.playMacro = false;" (click)="onPlayMacro()">
          Play
        </button>
      </ng-container>
    </cds-modal-footer>
  </form>
</cds-modal>

<cds-modal [open]="this.recMacro" (overlaySelected)="this.recMacro = true" (close)="this.recMacro = false">
  <form #recordMacroForm="ngForm">
    <cds-modal-header style="background-color: grey;" (closeSelect)="this.recMacro = false" [showCloseButton]="false">
      <p class="cds--modal-header__heading cds--type-beta">Record Macro</p>
    </cds-modal-header>
    <div class="cds--modal-content">
     <div id="macroRecordContainer">
      <cds-text-label>
        Enter Macro Name:
        <input cdsText [size]="'lg'" [placeholder]="'Enter Macro Name'" name="txtRecordMacro" id="txtRecordMacro" (ngModelChange)="clearValidation()"
          class="form-control" ngModel #txtRecordMacro="ngModel" required maxlength="15">
      </cds-text-label>
    </div>
      <div class="alert alert-danger" *ngIf="validationFlag">The Macro name already exists, Please enter a new Macro name.</div>
    </div>
    <cds-modal-footer>
      <ng-container>
        <button cdsButton="secondary" class="customButton" (click)="onCancel()">Cancel</button>
        <button cdsButton="primary" class="customButton" type="submit" [disabled]="!recordMacroForm.valid"
          (click)="onRecordMacro(recordMacroForm)">Record</button>
      </ng-container>
    </cds-modal-footer>
  </form>
</cds-modal>

<!-- <cds-modal [open]="this.renameMacro" (overlaySelected)="this.renameMacro = true" (close)="this.renameMacro = false">
  <form #renameMacroForm="ngForm">
    <cds-modal-header style="background-color: grey;" (closeSelect)="this.renameMacro = false"
      [showCloseButton]="false">
      <p class="cds--modal-header__heading cds--type-beta">Rename Macro</p>
    </cds-modal-header>
    <div class="cds--modal-content card">
      <div>
        Enter New Macro Name:
        <input matInput type="text" cdsText name="txtRenameMacro" id="txtRenameMacro" class="form-control"
          maxlength="15" ngModel pattern="^[a-zA-Z0-9-]*$" #txtRecordMacro="ngModel" required>
      </div>
    </div>
    <cds-modal-footer>
      <ng-container>
        <button cdsButton="secondary" class="customButton" (click)="this.renameMacro = false">Cancel</button>
        <button cdsButton="primary" class="customButton" type="submit"
          (click)="this.renameMacro = false;onRenameMacro(renameMacroForm)">Record</button>
      </ng-container>
    </cds-modal-footer>
  </form>
</cds-modal> -->

<cds-modal [open]="this.viewMacro" (overlaySelected)="this.viewMacro = true" (close)="this.viewMacro = false">
  <form #viewMacroForm="ngForm" (ngSubmit)="onViewMacro()">
    <cds-modal-header (closeSelect)="this.viewMacro = false" [showCloseButton]="false">
      <p class="cds--modal-header__heading cds--type-beta">View Macro</p>
    </cds-modal-header>
    <div class="cds--modal-content card custom-margin">
      <cds-text-label>
        Select Macro:</cds-text-label>
      <cds-dropdown [size]="size" (selected)="selected($event)">
        <cds-dropdown-list [items]="macroList" required></cds-dropdown-list>
      </cds-dropdown>
    </div>
    <cds-modal-footer>
      <ng-container>
        <button cdsButton="secondary" class="customButton" (click)="this.viewMacro = false">
          Cancel
        </button>
        <button cdsButton="primary" class="customButton">
          View
        </button>
      </ng-container>
    </cds-modal-footer>
    <span *ngIf="viewMacroFlag" class="span-margin custom-margin">Details of the selected Macro:</span>
    <div class="custom-border" *ngIf="viewMacroFlag" style="height:auto; max-height: 300px;overflow:auto">

      <div *ngFor="let step of selectedMacroObj['steps'];let i = index">
        <div class="ml-3">Step : {{i+1}} </div>
        <div class="ml-5">Key : {{step.sendKey}}</div>
        <div *ngFor="let inputField of step.fields">
          <div class="ml-5">Fields : {{inputField.name}}</div>
          <div class="ml-5">Value : {{inputField.value}}</div>
        </div>
        <hr>
      </div>
    </div>
  </form>
</cds-modal>

<cds-modal [open]="this.delMacro" (overlaySelected)="this.delMacro = false" (close)="this.delMacro = false">
  <cds-modal-header (closeSelect)="this.delMacro = false" [showCloseButton]="false">
    <p class="cds--modal-header__heading cds--type-beta">Delete Macro</p>
  </cds-modal-header>
  <div class="cds--modal-content">
    <cds-text-label>
      Select Macro:</cds-text-label>
    <cds-dropdown [size]="size" (selected)="selected($event)">
      <cds-dropdown-list [items]="macroList"></cds-dropdown-list>
    </cds-dropdown>
  </div>
  <cds-modal-footer>
    <ng-container>
      <button cdsButton="secondary" class="customButton" (click)="this.delMacro = false">
        Cancel
      </button>
      <button cdsButton="primary" class="customButton" (click)="this.delMacro = false; onDeleteMacro()">
        Delete
      </button>
    </ng-container>
  </cds-modal-footer>
</cds-modal>